<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sjednaní služby | Zemní práce Brtiš</title>
    <link rel="icon" type="image/png" href="favicon.PNG">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="technika.css"> <link rel="stylesheet" href="objednavka_sluzby.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

<header class="navbar">
    <nav class="glass-nav">
        <div class="logo">
            <a href="index.html"><img src="brtis_logo.PNG" alt="Brtiš Logo" class="nav-logo-img"></a>
            <span>Zemní práce Brtiš</span>
        </div>
        <div class="nav-links">
            <a href="index.html">Domů</a>
            <a href="sluzby-detail.html">Služby</a>
            <a href="technika.html">Technika</a>
            <a href="cenik.html" class="active">Ceník</a>
            <a href="kontakt.html">Kontakt</a>
            <a href="sluzby.html" class="btn-orange" style="color: orange">Sjednat službu</a>
        </div>
    </nav>
</header>

<main class="container quiz-container">
    <div id="quiz-card" class="tech-card glass-card quiz-card">
        <div class="quiz-progress"><div id="progress-bar" class="progress-fill"></div></div>
        
        <div id="quiz-step">
            <h2 id="question-text" class="section-title" style="font-size: 2rem;">Načítám...</h2>
            <div id="options-grid" class="options-grid">
                </div>
        </div>

        <div id="quiz-result" style="display: none; text-align: center;">
            <h2 class="section-title">Skvělé! Máme vše potřebné.</h2>
            <p class="perex" id="summary-text"></p>
            <div class="result-actions">
                <a href="kontakt.html" class="btn-orange">Odeslat nezávaznou poptávku</a>
                <button onclick="location.reload()" class="btn-outline">Začít znovu</button>
            </div>
        </div>
    </div>
</main>
<footer class="main-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-logo">
                <img src="brtis_logo.PNG" alt="Brtiš Logo">
                <p>Spolehlivé zemní práce s moderní technikou. Vaše vize, naše lžíce.</p>
            </div>
            <div class="footer-col">
                <h4>Kontakt</h4>
                <p><i class="fa-solid fa-location-dot" style="color: var(--orange); margin-right: 10px;"></i> Jeseník a okolí</p>
                <p><i class="fa-solid fa-phone" style="color: var(--orange); margin-right: 10px;"></i> <a href="tel:+420735256202" style="color:white; text-decoration:none;">+420 735 256 202</a></p>
                <p><i class="fa-solid fa-envelope" style="color: var(--orange); margin-right: 10px;"></i> <a href="mailto:martin.brtis@email.cz" style="color:white; text-decoration:none;">martin.brtis@email.cz</a></p>
            </div>
            <div class="footer-col">
                <h4>Rychlé odkazy</h4>
                <p><a href="sluzby-detail.html" style="color:white; text-decoration:none;">Služby</a></p>
                <p><a href="technika.html" style="color:white; text-decoration:none;">Technika</a></p>
                <p><a href="cenik.html" style="color:white; text-decoration:none;">Ceník</a></p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Zemní práce Martin Brtiš. Všechna práva vyhrazena. | Designed & Developed by Aurea </p>
        </div>
    </div>
</footer>
<div id="email-modal" class="modal-overlay">
    <div class="modal-content glass-card">
        <i class="fa-solid fa-circle-exclamation text-orange" style="font-size: 3rem; margin-bottom: 20px;"></i>
        <h3>E-mail je povinný</h3>
        <p>Potřebujeme váš e-mail, abychom vás mohli kontaktovat ohledně detailů zakázky.</p>
        <button onclick="closeModal()" class="btn-orange" style="margin-top: 20px;">Rozumím</button>
    </div>
</div>
<script>
const quizData = [
    {
        question: "O jaký typ práce máte zájem?",
        options: [
            { text: "Výkopy základů", icon: "fa-house" },
            { text: "Terénní úpravy", icon: "fa-mountain" },
            { text: "Přípojky a sítě", icon: "fa-faucet-drip" },
            { text: "Bazény a jímky", icon: "fa-water" },
            { text: "Cesty a dlažba", icon: "fa-road" },
            { text: "Demolice", icon: "fa-trowel-bricks" }
        ]
    },
    {
        question: "Jaký stroj preferujete?",
        options: [
            { text: "Pásový bagr (preciznost)", icon: "fa-tractor" },
            { text: "Traktorbagr (všestrannost)", icon: "fa-truck-pickup" },
            { text: "Je mi to jedno", icon: "fa-gears" }
        ]
    },
    {
        question: "Kdy potřebujete začít?",
        options: [
            { text: "Co nejdříve", icon: "fa-calendar-check" },
            { text: "Během měsíce", icon: "fa-calendar-days" },
            { text: "Jen zjišťuji cenu", icon: "fa-magnifying-glass-dollar" }
        ]
    },
    {
        question: "Na jaký e-mail vám máme zaslat nabídku?",
        type: "email",
        options: []
    }
];

let currentStep = 0;
let answers = [];

function loadStep() {
    const step = quizData[currentStep];
    const questionText = document.getElementById('question-text');
    const grid = document.getElementById('options-grid');
    
    // Nastavení textu otázky
    questionText.innerText = step.question;
    grid.innerHTML = '';

    if (step.type === "email") {
        // Zobrazení pole pro email
        grid.style.display = "block";
        const emailWrapper = document.createElement('div');
        emailWrapper.className = 'email-input-wrapper';
        emailWrapper.innerHTML = `
            <input type="email" id="user-email" placeholder="vas@email.cz" class="glass-input">
            <button onclick="saveEmail()" class="btn-orange" style="margin-top: 20px;">Pokračovat <i class="fa-solid fa-arrow-right"></i></button>
        `;
        grid.appendChild(emailWrapper);
    } else {
        // Zobrazení klasických dlaždic
        grid.style.display = "grid";
        step.options.forEach(option => {
            const div = document.createElement('div');
            div.className = 'option-box glass-card';
            div.innerHTML = `<i class="fa-solid ${option.icon}"></i> <span>${option.text}</span>`;
            div.onclick = () => selectOption(option.text);
            grid.appendChild(div);
        });
    }

    // Aktualizace progress baru
    const progress = (currentStep / quizData.length) * 100;
    document.getElementById('progress-bar').style.width = `${progress}%`;
}

function selectOption(answer) {
    answers.push(answer);
    currentStep++;

    // TADY BYLA CHYBA - Musíme zavolat loadStep(), aby se stránka přepsala!
    if (currentStep < quizData.length) {
        loadStep();
    } else {
        showResult();
    }
}

function saveEmail() {
    const emailInput = document.getElementById('user-email');
    const emailValue = emailInput.value.trim();
    
    // Validace: musí obsahovat @, tečku a mít rozumnou délku
    if (emailValue.includes('@') && emailValue.includes('.') && emailValue.length > 5) {
        selectOption(emailValue);
    } else {
        // Místo alertu zobrazíme naše modální okno
        document.getElementById('email-modal').classList.add('active');
    }
}

function closeModal() {
    document.getElementById('email-modal').classList.remove('active');
    document.getElementById('user-email').focus(); // Vrátíme kurzor do políčka
}

function showResult() {
    document.getElementById('quiz-step').style.display = 'none';
    document.getElementById('quiz-result').style.display = 'block';
    document.getElementById('progress-bar').style.width = '100%';
    
    document.getElementById('summary-text').innerHTML = `
        <div class="summary-list">
            <div class="summary-item"><strong>Služba:</strong> <span>${answers[0]}</span></div>
            <div class="summary-item"><strong>Technika:</strong> <span>${answers[1]}</span></div>
            <div class="summary-item"><strong>Termín:</strong> <span>${answers[2]}</span></div>
            <div class="summary-item"><strong>Váš E-mail:</strong> <span style="color: var(--orange);">${answers[3]}</span></div>
        </div>
        <p style="margin-top: 30px; font-size: 1.1rem; opacity: 0.8;">Vše vypadá v pořádku? Odešlete nám to!</p>
    `;
}

// Spuštění první otázky po načtení stránky
window.onload = loadStep;
</script>
</script>

</body>

</html>

